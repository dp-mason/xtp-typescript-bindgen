import * as main from "./main"

<% ctx.exports.forEach(ex => { -%>
export function <%= ex.name %>() {
  <% if (ex.input) { -%>
    <% if (isJson(ex.input)) { -%>
      const input: <%= ex.input.type %> = JSON.parse(Host.inputString())
    <% } else if (ex.input.type === 'string') { -%>
      const input: string = Host.inputString()
    <% } else { -%>
      const input: ArrayBufferLike = Host.inputBytes()
    <% } -%>

    <% if (ex.output) { -%>
      const output = main.<%= ex.name %>Impl(input)
    <% } else { -%>
      main.<%= ex.name %>Impl(input)
    <% } -%>
  <% } else { -%>
    <% if (ex.output) { -%>
      const output = main.<%= ex.name %>Impl()
    <% } else { -%>
      main.<%= ex.name %>Impl()
    <% } -%>
  <% } -%>

  <% if (ex.output) { -%>
    <% if (isJson(ex.output)) { -%>
      Host.outputString(JSON.stringify(output))
    <% } else if (ex.input.type === 'string') { -%>
      Host.outputString(output)
    <% } else { -%>
      Host.outputBytes(output)
    <% } -%>
  <% } -%>

  return 0
}

<% }) %>

